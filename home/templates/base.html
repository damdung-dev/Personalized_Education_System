{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Personalized Education System{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />

  <style>
    :root{
      --primary:#007aff;
      --secondary:#00cfff;
      --bg:#f4f6fa;
      --bg-dark:#12161d;
      --text:#111;
      --text-dark:#eaeaea;
      --card:rgba(255,255,255,.85);
      --card-dark:rgba(24,27,34,.9);
      --shadow:0 8px 24px rgba(0,0,0,.08);
      --radius:14px;
      --header-h:56px;
    }

    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      overflow-x:hidden; /* ch·∫∑n tr∆∞·ª£t ngang */
    }
    body.dark{background:var(--bg-dark); color:var(--text-dark);}

    /* ========== TOPBAR ========== */
    .topbar{
      position:sticky; top:0; z-index:1000;
      display:flex; align-items:center; justify-content:space-between;
      height:var(--header-h);
      padding:8px 14px;
      width:100%;
      background:var(--card);
      -webkit-backdrop-filter: blur(12px); backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
    }
    body.dark .topbar{background:var(--card-dark)}

    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:700;
    }
    .brand .menu-btn{
      border:none; background:transparent; font-size:22px; line-height:1; cursor:pointer;
    }
    .brand .menu-btn:focus{outline:2px solid var(--primary); outline-offset:2px}

    /* actions ph·∫£i topbar */
    .top-actions{display:flex; align-items:center; gap:8px;}

    /* N√∫t/Link topbar: desktop c√≥ ch·ªØ + icon, mobile ch·ªâ icon */
    .top-link{
      display:inline-flex; align-items:center; gap:8px;
      border:none; background:transparent; color:inherit;
      padding:6px 10px; border-radius:10px; text-decoration:none; cursor:pointer;
      transition:background .2s ease, transform .15s ease;
    }
    .top-link:hover{background:rgba(0,0,0,.06); transform:translateY(-1px)}
    body.dark .top-link:hover{background:rgba(255,255,255,.08)}
    .top-link .label{display:none}
    @media(min-width:768px){ .top-link .label{display:inline} }

    .btn-primary-ghost{
      border:1px solid rgba(0,0,0,.12);
      padding:6px 12px; border-radius:999px; background:transparent;
    }
    body.dark .btn-primary-ghost{border-color:rgba(255,255,255,.15)}

    .btn-blue{
      background:var(--primary); color:#fff; border:none; border-radius:999px;
      padding:6px 12px; font-weight:600;
    }
    .btn-blue:hover{filter:brightness(.95)}
    .btn-blue:active{transform:translateY(1px)}

    .search-wrap{
      position:relative; display:none; /* ·∫©n tr√™n mobile */
    }
    @media(min-width:992px){ .search-wrap{display:block} }
    .search-wrap input{
      padding:8px 12px 8px 36px; border:none; border-radius:999px; width:220px;
      background:rgba(0,0,0,.06);
    }
    body.dark .search-wrap input{background:rgba(255,255,255,.08); color:inherit}
    .search-wrap .ico{
      position:absolute; left:10px; top:50%; transform:translateY(-50%);
      opacity:.6; pointer-events:none;
    }

    /* ========== LAYOUT ========== */
    .layout{display:flex; min-height:calc(100vh - var(--header-h) - 48px);}
    /* ===== SIDEBAR ===== */
    .sidebar {
      width: 260px;
      flex-shrink: 0;
      background: var(--card);
      -webkit-backdrop-filter: blur(18px);
      backdrop-filter: blur(18px);
      border-right: 1px solid rgba(0,0,0,.06);
      box-shadow: var(--shadow);
      transition: transform .3s ease, background .3s ease;
    }
    body.dark .sidebar {
      background: var(--card-dark);
      border-right-color: rgba(255,255,255,.06);
    }

    /* Sidebar n·ªôi dung */
    .sidebar-inner {
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 14px 0;
    }

    /* Navigation */
    .side-nav {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .side-nav li {
      margin: 4px 12px;
    }
    .side-nav a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 14px;
      border-radius: var(--radius);
      color: inherit;
      font-weight: 500;
      text-decoration: none;
      transition: background .25s ease, transform .15s ease;
    }
    .side-nav a:hover {
      background: rgba(0,0,0,.06);
      transform: translateX(4px);
    }
    body.dark .side-nav a:hover {
      background: rgba(255,255,255,.08);
    }

    /* Icon n·ªïi b·∫≠t */
    .side-nav a::before {
      font-size: 1.2rem;
    }
    .side-nav .exit a {
      color: #ff3b30;
      font-weight: 600;
    }
    .side-nav .exit a:hover {
      background: rgba(255,59,48,.15);
    }


    /* MAIN */
    .main{flex:1; padding:20px; width:100%; max-width:100%}
    .container-limit{max-width:1100px; margin-inline:auto}

    /* OVERLAY (che n·ªôi dung khi m·ªü sidebar tr√™n mobile, KH√îNG che topbar) */
    .overlay{
      position:fixed; left:0; top:var(--header-h);
      width:100%; height:calc(100vh - var(--header-h));
      background:rgba(0,0,0,.35);
      opacity:0; visibility:hidden; transition:opacity .25s ease, visibility .25s ease;
      z-index:900; /* th·∫•p h∆°n topbar */
    }
    .overlay.show{opacity:1; visibility:visible}

    /* FOOTER */
    .footer{
      width:100%;
      padding:12px 16px; text-align:center; background:var(--card);
      -webkit-backdrop-filter: blur(12px); backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
    }
    body.dark .footer{background:var(--card-dark)}

    .logo-icon {
      width: 32px;   /* ch·ªânh t√πy theo mong mu·ªën */
      height: 32px;
      margin-left: 8px;  /* kho·∫£ng c√°ch gi·ªØa icon v√† menu-btn */
      margin-right: 8px; /* kho·∫£ng c√°ch gi·ªØa icon v√† ch·ªØ Edu System */
    }


    /* Mobile m·∫∑c ƒë·ªãnh ·∫©n sidebar */
    @media(max-width:991.98px){
      .sidebar {
        position: fixed;
        top: var(--header-h);
        left: 0;
        height: calc(100vh - var(--header-h));
        transform: translateX(-100%);
        z-index: 1200;
      }
      .sidebar.active {
        transform: translateX(0);
      }
    }

    /* Desktop: sidebar lu√¥n hi·ªán */
    @media(min-width:992px){
      .sidebar {
        position: relative;
        transform: none;
      }
    }
  </style>
  {% block style %}{% endblock %}
</head>
<body>
  <!-- ===== TOPBAR ===== -->
  <header class="topbar">
    <div class="brand">
      <button class="menu-btn" id="menuBtn" aria-label="M·ªü menu">‚ò∞</button>
      <img src="{% static 'home/images/Image_logo.png' %}" alt="FutureHands Logo" class="logo-icon">
      <span>Edu System</span>
    </div>

    <div class="top-actions">
      <a class="top-link" href="{% url 'home:teachers' %}" title="Gi√°o vi√™n" aria-label="Gi√°o vi√™n">üë©‚Äçüè´ <span class="label">Gi√°o vi√™n</span></a>
      <a class="top-link" href="{% url 'home:courses_current' %}" title="Kh√≥a h·ªçc" aria-label="Kh√≥a h·ªçc">üìö <span class="label">Kh√≥a h·ªçc</span></a>
      <a class="top-link" href="{% url 'home:help' %}" title="Tr·ª£ gi√∫p" aria-label="Tr·ª£ gi√∫p">‚ùì <span class="label">Tr·ª£ gi√∫p</span></a>

      <button id="themeBtn" class="top-link btn-primary-ghost" type="button" aria-label="Chuy·ªÉn ch·∫ø ƒë·ªô s√°ng/t·ªëi">üåô <span class="label">Ch·∫ø ƒë·ªô</span></button>

      <div class="search-wrap">
        <span class="ico">üîç</span>
        <input type="search" placeholder="T√¨m nhanh..." />
      </div>
    </div>
  </header>

  <!-- ===== LAYOUT ===== -->
  <div class="layout">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-inner">
        <ul class="side-nav">
          <li><a href="{% url 'home:account' %}">üë§ T√†i kho·∫£n</a></li>
          <li><a href="{% url 'home:dashboard' %}">üè† Trang ch·ªß</a></li>
          <li><a href="{% url 'home:courses' %}">üìö Kh√≥a h·ªçc</a></li>
          <li><a href="{% url 'home:results' %}">üìä K·∫øt qu·∫£</a></li>
          <li><a href="{% url 'home:documents' %}">üìÑ T√†i li·ªáu</a></li>
          <li><a href="{% url 'home:calendar' %}">üìÖ L·ªãch</a></li>
          <li><a href="{% url 'home:chat' %}">üí¨ Chat</a></li>
          <li><a href="{% url 'home:notifications' %}">üîî Th√¥ng b√°o</a></li>
          <li class="exit"><a href="{% url 'home:exit' %}" id="logout-link">üö™ ƒêƒÉng xu·∫•t</a></li>
        </ul>
      </div>
    </aside>

    <main class="main">
      <div class="container-limit">
        {% block content %}{% endblock %}
      </div>
    </main>
  </div>

  <div class="overlay" id="overlay"></div>

  <!-- ===== FOOTER ===== -->
  <footer class="footer">
    <div class="container-limit">
      &copy; 2025 ƒê√†m ƒê·ª©c D≈©ng - l·ªõp 25Python01 - 24
    </div>
  </footer>

  {% block script %}
  <script>
(function(){
  const sidebar = document.getElementById('sidebar');
  const menuBtn = document.getElementById('menuBtn');
  const overlay = document.getElementById('overlay');
  const themeBtn = document.getElementById('themeBtn');

  // toggle sidebar
  function toggleSidebar(){
    sidebar.classList.toggle('active');
    overlay.classList.toggle('show');
  }
  function closeSidebar(){
    sidebar.classList.remove('active');
    overlay.classList.remove('show');
  }

  menuBtn.addEventListener('click', toggleSidebar);
  overlay.addEventListener('click', closeSidebar);
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeSidebar(); });
  window.addEventListener('resize', ()=>{ if(window.innerWidth >= 992) closeSidebar(); });

  // Dark mode
  const savedTheme = localStorage.getItem('theme');
  if(savedTheme === 'dark') document.body.classList.add('dark');

  themeBtn.addEventListener('click', ()=>{
    document.body.classList.toggle('dark');
    localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
  });
})();
  document.getElementById("logout-link").addEventListener("click", function(event) {
    event.preventDefault(); // ch·∫∑n m·∫∑c ƒë·ªãnh
    if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën tho√°t?")) {
      window.location.href = this.href; // chuy·ªÉn h∆∞·ªõng khi ch·ªçn OK
    }
  });
</script>

  {% endblock %}
</body>
</html>
